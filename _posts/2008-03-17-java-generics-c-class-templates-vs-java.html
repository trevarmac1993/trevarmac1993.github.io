---
layout: post
title: "Java Generics: C++ class templates vs. Java class generics"
date: 2008-03-17
comments: true
tags: [  Java ]
---

Generics are a great thing. C++ already had already a similar mechanism called templates. This for instance allowed you to write completely abstract classes which could - theoretically - be of any type. Take for instance the following:<br /><pre class="prettyprint">#include &lt;iostream&gt;<br />#include &lt;string.h&gt;<br />#include &lt;conio.h&gt;<br /><br />using namespace std;<br /><br />template &lt;class A&gt; class Container{<br />      <br />      A value;<br />public:<br />       Container(A val){<br />                   value=val;<br />       }<br />       <br />       A getValue(){<br />         return value;             <br />       }<br />       <br />       void setValue(A val){<br />            value = val;<br />            <br />       }<br />};<br /><br />int main(){<br />    template class Container&lt;string&gt; *c = new Container&lt;string&gt;(&quot;hallo&quot;);<br />    cout &lt;&lt; &quot;Printout: &quot; &lt;&lt; c-&gt;getValue() &lt;&lt; &quot;\n&quot;;<br />    Container&lt;int&gt; d(3);<br />    cout &lt;&lt; &quot;Printout: &quot; &lt;&lt; d.getValue();<br />    getch();<br />}<br /></pre><br /><br />In Java "templates" are called generics. They are enclosed with two <> signs. Translating the above code into Java would look as follows:<br /><pre class="prettyprint"><br />public class Container&lt;T&gt; {<br /> private T t;<br /><br /> public Container(T t) {<br />  this.t = t;<br /> }<br /><br /> public T getT() {<br />  return t;<br /> }<br /><br /> public void setT(T t) {<br />  this.t = t;<br /> }<br /><br /> public void showType() {<br />  System.out.println(&quot;\nI'm of type &quot; + t.getClass().getSimpleName());<br />  System.out.println(&quot;My value: &quot; + t);<br /> }<br /> <br /> public static void main(String[] args) {<br />  Container&lt;String&gt; gt = new Container&lt;String&gt;(&quot;Hello&quot;);<br />  Container&lt;Integer&gt; gt2 = new Container&lt;Integer&gt;(10);<br />  <br />  gt.showType();<br />  gt2.showType();<br /> }<br />}</pre><br /><br />The process of setting the type of the class template (in C++) or generic is called template specialization or generics specialization. Although the two different pieces of code may look quite similar, they are a different thing in both languages. Java generics simply offer compile-time safety and eliminate the need for casts. They are implemented directly by the Java compiler as a front-end conversion, also known as <span style="font-style: italic;">type erasure</span>. The compiler basically just erases all generic specifications (between the angle brackets) and inserts casts where necessary. Moreover it keeps track of the generics internally such that all instantiations will use the same underlying generic class at compile/run time. It is therefore somehow a process of code translation or rewriting.<br />A C++ template gets reproduced and  re-compiled entirely whenever a template is instantiated with a new class.<br />The main difference is that Java generics are encapsulated. The errors are flagged when they occur and not later when the corresponding classes are used/instantiated.