---
layout: post
title: "HowTo: Using VS2010 Web.config Transformations to Bypass SSL Authentication Locally"
date: 2010-12-06
comments: true
tags: [  HowTo, .Net, WCF ]
---

<p>Most often when you create WCF webservices you'll want to run them in a secure channel, for instance by using SSL encryption on the transport level. This makes it however cumbersome during development, when you want to host the service on your local development server.</p>

Consequently, when testing locally you'd set the transport mode to "None" while during deploy you'd change it to "Transport" security (or one of the desired alternatives). You need to remember to change the service's configuration in the web.config however and we all know that it is easy to forget these things, not to mention our&nbsp;laziness ;).<br /><br />Visual Studio 2010 has now a new feature called "<a href="http://msdn.microsoft.com/en-us/library/dd465326.aspx">Web.config Transformations</a>". It allows you to manipulate your default web.config settings similar as in XSL transformations. The available transformations are limited to the assembly compilation options, "Debug" and "Release" mode.<br /><br />This comes in really handy when trying to automate the above mentioned scenario. The default web.config settings should fit those for <b>local development</b>.<br /><pre class="brush:xml;highlight:[5]">&lt;system.serviceModel&gt;<br />  &lt;bindings&gt;<br />    &lt;basicHttpBinding&gt;<br />      &lt;binding name="MyService_v1_0_SOAP11Binding"&gt;<br />        &lt;security mode="None"&gt;<br />          &lt;transport clientCredentialType="Windows"/&gt;<br />        &lt;/security&gt;<br />      &lt;/binding&gt;<br />    &lt;/basicHttpBinding&gt;<br />  &lt;/bindings&gt;<br />  &lt;services&gt;<br />    &lt;service behaviorConfiguration="myService_v1Behavior" name="MyCompany.MyProject.WSService.MyService"&gt;<br />      &lt;endpoint address="" binding="basicHttpBinding" bindingConfiguration="MyService_v1_0_SOAP11Binding" contract="MyCompany.MyProject.WSService.MyService_v1_0"&gt;<br />      &lt;/endpoint&gt;<br />      &lt;endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/&gt;<br />    &lt;/service&gt;<br />  &lt;/services&gt;<br />  &lt;behaviors&gt;<br />    &lt;serviceBehaviors&gt;<br />      &lt;behavior name="myService_v1Behavior"&gt;<br />        &lt;serviceMetadata httpGetEnabled="true" externalMetadataLocation="../wsdl/MyService_v1.wsdl"/&gt;<br />        &lt;serviceDebug includeExceptionDetailInFaults="true"/&gt;<br />      &lt;/behavior&gt;<br />    &lt;/serviceBehaviors&gt;<br />  &lt;/behaviors&gt;<br />&lt;/system.serviceModel&gt;</pre>When publishing using <b>release</b>&nbsp;compilation, the following transformations would be applied<br /><pre class="brush:xml;highlight:[9]">&lt;?xml version="1.0"?&gt;<br />&lt;configuration xmlns:xdt="http://schemas.microsoft.com/XML-Document-Transform"&gt;<br />  &lt;system.web&gt;<br />    &lt;compilation xdt:Transform="RemoveAttributes(debug)" /&gt;<br />  &lt;/system.web&gt;<br />  &lt;system.serviceModel&gt;<br />    &lt;bindings&gt;<br />      &lt;basicHttpBinding&gt;<br />        &lt;binding name="MyService_v1_0_SOAP11Binding" xdt:Transform="Replace"&gt;<br />          &lt;security mode="Transport"&gt;<br />            &lt;transport clientCredentialType="Windows"/&gt;<br />          &lt;/security&gt;<br />        &lt;/binding&gt;<br />      &lt;/basicHttpBinding&gt;<br />    &lt;/bindings&gt;<br />    &lt;services&gt;<br />       &lt;!-- snip snip --&gt;<br />    &lt;/services&gt;<br />    &lt;behaviors&gt;<br />       &lt;!-- snip snip --&gt;<br />    &lt;/behaviors&gt;<br />  &lt;/system.serviceModel&gt;<br />&lt;/configuration&gt;</pre>As can be seen, the security mode part is being replaced, activating <b>Transport</b> security.<br /><br />Now obviously, this is a very dummy file I just copy&amp;pasted from a project, taking out irrelevant parts. But if you get the idea, you see how powerful these transformations can be.