---
layout: post
title: Sequential Asynchronous Processing with jQuery Deferreds
date: 2012-02-13
comments: true
tags: [  JavaScript, jQuery ]
---

<p>Asynchronous processing is one of the most difficult things for devs to understand when switching from the more traditional web programming pattern to a more client-server like model when creating rich JavaScript single-page apps. It involves a lot of passing callbacks around which makes the code ugly to ready and more complex. With the introduction of <a href="http://api.jquery.com/category/deferred-object/">jQuery Deferred</a> this hasn't to be the case any more!</p>

jQuery Deferreds have been introduced with jQuery v1.5 and are a really nice mechanism for handling such asynchronous processing situations. Such asynch&nbsp;processing&nbsp;does not necessarily have to be an ajax call, but might also involve some operation that waits for an external event, such as a user interaction.<br /><br />For instance consider the following control flow:<br /><ol><li><b>The user clicks a button.</b><br />A popup should appear asking the user for some information. If he provides the info, step 2 should be called.</li><li><b>An ajax call is done to the server</b>, if the call succeeds, step 3 should be called</li><li>The <b>data from the ajax call should be processed</b> and on success the final state should be invoked.</li><li>The <b>final success state</b>.</li></ol><div>Obviously, if in any of those states the operation fails or the user cancels the operation, the final state should never be reached, but rather some failure state should be called.<br /><br />How would you implement this? With callbacks? A nightmare...I'm not even going to implement it as the result would be totally unreadable, not to speak about maintainability of the code. Instead, with the jQuery Deferred object, the result might look as shown in this dummy jsfiddle example:<br /><br /></div><iframe allowfullscreen="allowfullscreen" frameborder="0" src="http://jsfiddle.net/juristr/LrAeW/12/embedded/" style="height: 600px; width: 100%;"></iframe>&nbsp;Note, I consciously didn't properly refactor the code in order to not "hide" anything for the purpose of this demonstration here.<br /><br />This reminds me a bit of the <a href="http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.aspx">C# Task API </a>with its <code>ContinueWith</code> etc methods. <br /><br /><u>References:</u><br /><a href="http://msdn.microsoft.com/en-us/scriptjunkie/gg723713.aspx">http://msdn.microsoft.com/en-us/scriptjunkie/gg723713.aspx</a>